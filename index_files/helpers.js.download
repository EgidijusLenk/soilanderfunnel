// NOT EDITABLE!!!
function addCSSRule(sheet, selector, rules, index) {
    if ("insertRule" in sheet) {
        sheet.insertRule(selector + "{" + rules + "}", index);
    } else if ("addRule" in sheet) {
        sheet.addRule(selector, rules, index);
    }
}
var sheet = (function() {
    var style = document.createElement("style");
    style.appendChild(document.createTextNode(""));
    document.head.appendChild(style);
    return style.sheet;
})();
addCSSRule(sheet, "#qubiq-container", "display: none");

function getScriptTagParams(e) {
    for (var t = document.getElementsByTagName("script"), r = 0; r < t.length; r++)
        if (t[r].src.indexOf("/" + e) > -1) {
            for (var o = t[r].src.split("?").pop().split("&"), a = {}, n = 0; n < o.length; n++) {
                var c = o[n].split("=");
                a[c[0]] = c[1]
            }
            return a
        }
    return {}
}

var imported = document.createElement("script");

function parseQueryString(e) {
    return e.replace(/(^\?)/, "").split("&").map(function(e) {
        return (e = e.split("="))[0] && (this[e[0]] = decodeURIComponent(("" + e[1]).replace(/\+/g, "%20"))), this
    }.bind({}))[0]
}

function getUrlParameters() {
    return parseQueryString(window.location.search || "?")
}

function validateValue(e, t) {
    return "string" != typeof t || !t.length || !("{" === t[0] && "}" === t[t.length - 1] || "#" === t[0] && "#" === t[t.length - 1])
}

function decompressParameter(e) {
    var t = {};
    return e.split(";").forEach(function(e) {
        if (e) {
            var r = e.split(":"),
                o = r[0] ? r[0].trim() : "";
            if (o) {
                var a = r[1] ? r[1].trim() : "";
                validateValue(o, a) && (t[o] = decodeURIComponent(a))
            }
        }
    }), t
}

imported.src = "https://st.formulead.com/assets/js/bioep.min.js", document.head.appendChild(imported);

function newgetURLParameter(name) {
    name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
    var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
    var results = regex.exec(location.search);
    return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
}
var onPageLoad = "false" === getScriptTagParams("helpers").onPageLoad,
    server_id = newgetURLParameter("s_id") || "cdn",
    script_protocol = "https://",
    protocol = document.location.protocol,
    hostname = document.location.hostname;
"file:" !== protocol && -1 === hostname.indexOf("localhost") && -1 === hostname.indexOf("127.0.0.1") && "dev" !== server_id && -1 === server_id.indexOf("review") || (script_protocol = "http://");
var host = script_protocol + server_id + ".formulead.com",
    country = "",
    aff_code = newgetURLParameter("aff_code") || "",
    aff_sub = newgetURLParameter("aff_sub") || "",
    aff_sub2 = newgetURLParameter("aff_sub2") || "",
    aff_sub3 = newgetURLParameter("aff_sub3") || "",
    aff_sub4 = newgetURLParameter("aff_sub4") || "",
    aff_sub5 = newgetURLParameter("aff_sub5") || "",
    aff_fbp = newgetURLParameter("aff_fbp") || "",
    aff_fbpe = newgetURLParameter("aff_fbpe") || "",
    aff_source = newgetURLParameter("aff_source") || "",
    aff_offer_id = newgetURLParameter("aff_offer_id") || "",
    aff_tid = newgetURLParameter("aff_tid") || "",
    aff_goal_id2 = newgetURLParameter("aff_goal_id2") || "",
    aff_id = newgetURLParameter("aff_id") || "",
    aff_inc = newgetURLParameter("aff_inc") || "",
    sc_oid = newgetURLParameter("sc_oid") || "",
    sc_tid = newgetURLParameter("sc_tid") || "",
    ld_first_name = newgetURLParameter("ld_first_name") || "",
    ld_last_name = newgetURLParameter("ld_last_name") || "",
    ld_zip_code = newgetURLParameter("ld_zip_code") || "",
    ld_email = newgetURLParameter("ld_email") || "",
    ld_gender = newgetURLParameter("ld_gender") || "",
    ld_address_line1 = newgetURLParameter("ld_address_line1") || "",
    ld_phone_cell = newgetURLParameter("ld_phone_cell") || "",
    ld_dob = newgetURLParameter("ld_dob") || "",
    qb_lead_id = newgetURLParameter("qb_lead_id") || "",
    ql_vendor_id = newgetURLParameter("ql_vendor_id") || "",
    cl_device = newgetURLParameter("cl_device") || "",
    qb_content_id = newgetURLParameter("qb_content_id") || "",
    aff_adv_id = newgetURLParameter("aff_adv_id") || "",
    qb_flow_id = newgetURLParameter("qb_flow_id") || "",
    qb_lead_uts = newgetURLParameter("qb_lead_uts") || "",
    ql_session_id = newgetURLParameter("ql_session_id") || "",
    qb_vendor_id = newgetURLParameter("qb_vendor_id") || "",
    p_id = newgetURLParameter("p_id") || "",
    aff_p = null,
    aff_c = null,
    vl_fbpxid = null,
    consent_given = null,
    fullLead = false;

function ajax(e, t, r, o) {
    var a;
    try {
        a = new XMLHttpRequest
    } catch (e) {
        try {
            a = new ActiveXObject("Msxml2.XMLHTTP")
        } catch (e) {
            try {
                a = new ActiveXObject("Microsoft.XMLHTTP")
            } catch (e) {
                return alert("Your browser does not support Ajax."), !1
            }
        }
    }
    return a.onreadystatechange = function() {
        4 == a.readyState && r(a)
    }, a.open(t, e, !0), a.send(o), a
}

! function() {
    var e = getUrlParameters();
    for (var t in e)
        if (-1 !== t.indexOf("_c_")) {
            var r = decompressParameter(e[t]);
            r.aff_code && (aff_code = r.aff_code),
                r.aff_sub && (aff_sub = r.aff_sub),
                r.aff_sub2 && (aff_sub2 = r.aff_sub2),
                r.aff_sub3 && (aff_sub3 = r.aff_sub3),
                r.aff_sub4 && (aff_sub4 = r.aff_sub4),
                r.aff_sub5 && (aff_sub5 = r.aff_sub5),
                r.aff_fbp && (aff_fbp = r.aff_fbp),
                r.aff_fbpe && (aff_fbpe = r.aff_fbpe),
                r.aff_source && (aff_source = r.aff_source),
                r.aff_offer_id && (aff_offer_id = r.aff_offer_id),
                r.aff_tid && (aff_tid = r.aff_tid),
                r.aff_goal_id2 && (aff_goal_id2 = r.aff_goal_id2),
                r.aff_id && (aff_id = r.aff_id),
                r.aff_inc && (aff_inc = r.aff_inc),
                r.sc_oid && (sc_oid = r.sc_oid),
                r.sc_tid && (sc_tid = r.sc_tid),
                r.ld_first_name && (ld_first_name = r.ld_first_name),
                r.ld_last_name && (ld_last_name = r.ld_last_name),
                r.ld_zip_code && (ld_zip_code = r.ld_zip_code),
                r.ld_email && (ld_email = r.ld_email),
                r.ld_gender && (ld_gender = r.ld_gender),
                r.ld_address_line1 && (ld_address_line1 = r.ld_address_line1),
                r.ld_phone_cell && (ld_phone_cell = r.ld_phone_cell),
                r.ld_dob && (ld_dob = r.ld_dob),
                r.qb_lead_id && (qb_lead_id = r.qb_lead_id),
                r.ql_vendor_id && (ql_vendor_id = r.ql_vendor_id),
                r.cl_device && (cl_device = r.cl_device),
                r.qb_content_id && (qb_content_id = r.qb_content_id),
                r.aff_adv_id && (aff_adv_id = r.aff_adv_id),
                r.qb_flow_id && (qb_flow_id = r.qb_flow_id),
                r.qb_vendor_id && (qb_vendor_id = r.qb_vendor_id);
        }
}(),
function() {
    try {
        ajax(host + "/v/country", "get", function(e) {
            var t = JSON.parse(e.responseText);
            country = (country = newgetURLParameter("cl_country") || t.country || "").toUpperCase()
        })
    } catch (e) {
        console.log(e)
    }
}();
var globalTimeout = null;
var waitForGlobal = function(key, callback) {
    globalTimeout = null;
    if (typeof(window[key]) !== "undefined" && window[key] !== null) {
        callback();
    } else {
        globalTimeout = setTimeout(function() {
            waitForGlobal(key, callback);
        }, 500);
    }
};

//--0.START DEFAULT - Scripts that trigger without consent
var noConsentNeeded = function() {
    var spinner = document.getElementById("spinner");
    var spinnerText = document.getElementById("spinner-text");
    var qubiqContainer = document.getElementById("qubiq-container");
    if (spinner) {
        spinner.style.display = 'none';
    }
    if (spinnerText) {
        spinnerText.style.display = 'none';
    }
    if (qubiqContainer) {
        qubiqContainer.style.display = "block";
    }


    // Exit intent (BIOEP)
    if (country && (country == 'DD' || country == 'XX')) { //COUNTRY - later to exlcude IMP
        function getCID(country) {
            switch (country) {
                case 'AU':
                    return '72b0b90a-c220-42e2-b951-807fb3064b78';
                case 'GB':
                    return '7a3099c2-ab4f-402c-a9fc-15217b51035b';
                case 'UK':
                    return '7a3099c2-ab4f-402c-a9fc-15217b51035b';
                case 'FR':
                    return '6f7fc6c1-6902-44ab-9e47-90db70041f13';
                case 'NL':
                    return 'e43ad772-c9d3-4d3e-8642-3dd4da3ecdec';
                default:
                    return '0e32020c-1a52-4cab-8fb6-cfc465171a97';
            }
        }

        function getImage(country) {
            switch (country) {
                case 'AU':
                    return "https://app.ln5.quiztionnaire.com/assets/img/exit_intent/exitpopup_en.gif";
                case 'GB':
                    return "https://app.ln5.quiztionnaire.com/assets/img/exit_intent/exitpopup_en.gif";
                case 'UK':
                    return "https://app.ln5.quiztionnaire.com/assets/img/exit_intent/exitpopup_en.gif";
                case 'FR':
                    return "https://app.ln5.quiztionnaire.com/assets/img/exit_intent/exitpopup_en.gif";
                case 'NL':
                    return "https://app.ln5.quiztionnaire.com/assets/img/exit_intent/exitpopup_en.gif";
                default:
                    return "https://app.ln5.quiztionnaire.com/assets/img/exit_intent/exitpopup_en.gif";
            }
        }

        var bioepLink = "https://pridecor-pamins.com/" + getCID(country) + "?ld_first_name=" + newgetURLParameter("ld_first_name") + "&ld_last_name=" + newgetURLParameter("ld_last_name") + "&ld_zip_code=" + newgetURLParameter("ld_zip_code") + "&ld_email=" + newgetURLParameter("ld_email") + "&ld_gender=" + newgetURLParameter("ld_gender") + "&ld_address=" + newgetURLParameter("ld_address_line1") + "&ld_phone_cell=" + newgetURLParameter("ld_phone_cell") + "&ld_age=" + newgetURLParameter("ld_age") + "&ld_dob=" + newgetURLParameter("ld_dob") + "&aff_inc=" + newgetURLParameter("aff_inc") + "&externalid=" + newgetURLParameter("aff_id") + "|" + newgetURLParameter("aff_goal_id2") + "|" + newgetURLParameter("aff_tid") + "|" + aff_offer_id + "|" + newgetURLParameter("aff_code") + "|" + aff_sub + "|" + aff_sub2 + "|" + aff_sub3 + "|" + aff_sub4 + "|" + aff_sub5 + "|" + newgetURLParameter("ql_vendor_id") + "|" + newgetURLParameter("qb_lead_id") + "|" + newgetURLParameter("sc_oid") + "|" + newgetURLParameter("cl_device");
        bioEp.init({
            html: '<div id="bio_ep_content">' +
                '<a href="' + bioepLink + '">' +
                '<img src="' + getImage(country) + '" alt="Claim your discount!" /></a>' +
                '</div>',
            css: '#bio_ep {width: 400px; height: 300px; color: #333; box-shadow: none; border: none; background-color: transparent; text-align: center;}',
            cookieExp: 0,
            delay: 1
        });
    }

    // directLinkCode hasoffers (set Click for Widget)
    if (aff_offer_id == '30' || aff_offer_id == '32' || aff_offer_id == '60' || aff_offer_id == '90' || aff_offer_id == '92' || aff_offer_id == '96' || aff_offer_id == '98' || aff_offer_id == '124' || aff_offer_id == '140' || !aff_offer_id) { // HERE YOU SET WHAT AFF_CODE YOU WISH TO USE
        var script1 = document.createElement('script');
        script1.text = 'var hasoffers_domain = "https://qbq01.qubize.org"';
        var script2 = document.createElement('script');
        script2.src = 'https://st.formulead.com/assets/js/dl_modified.js';
        document.head.appendChild(script1);
        document.head.appendChild(script2);
    }


    // default onesignal data
    var oneSignalData = {
        appId: '672b92a6-01fe-4ce9-a88f-b87a608efebe',
        title: 'NectarContests',
        en: {
            actionMessage: 'Can we update you with winner info and other special promotions?',
            yes: 'Yes',
            no: 'No',
            welcomeMessage: 'Thanks for subscribing'
        },
        nl: {
            actionMessage: 'Wilt u de afleverinformatie ontvangen over uw gewonnen product?',
            yes: 'Ja',
            no: 'Nee',
            welcomeMessage: 'Bedankt!'
        },
        fr: {
            actionMessage: 'Voulez-vous recevoir les informations sur le gagnant  ou d\'autres promotions spéciales?',
            yes: 'Oui',
            no: 'Non',
            welcomeMessage: 'Merci!'
        },
        es: {
            actionMessage: '¿Podemos actualizarlo con información del ganador y otras promociones especiales?',
            yes: 'Sí',
            no: 'No',
            welcomeMessage: 'Gracias!'
        },
        no: {
            actionMessage: 'Kan vi oppdatere deg med vinnerinfo og andre spesielle kampanjer?',
            yes: 'Ja',
            no: 'Nei',
            welcomeMessage: 'Takk skal du ha!'
        },
        se: {
            actionMessage: 'Kan vi uppdatera dig med vinnareinfo och andra specialerbjudanden?',
            yes: 'Ja',
            no: 'Nej',
            welcomeMessage: 'Tack!'
        }
    };

    var hostnameFound = true;

    // switch through hostnames and set appId, and the action messages accordingly
    switch (true) {
        case (hostname.indexOf('form.ln1.leadsking.co') != -1):
            oneSignalData.title = 'Survey';
            oneSignalData.appId = '9d3b915f-27c5-42da-adb9-433e242c8093';
            oneSignalData.en.actionMessage = 'Are you over 18 years old?';
            oneSignalData.nl.actionMessage = 'Ben je ouder dan 18 jaar?';
            oneSignalData.fr.actionMessage = 'Avez-vous plus de 18 ans?';
            oneSignalData.es.actionMessage = '¿Tienes más de 18 años?';
            oneSignalData.se.actionMessage = 'Är du över 18 år?';
            oneSignalData.no.actionMessage = 'Er du over 18 år?';
            break;
        case (hostname.indexOf('app.ln1.leadsking.co') != -1):
            oneSignalData.title = 'Survey';
            oneSignalData.appId = '836cb908-11b4-4659-bc7c-0a40a80d71c1';
            oneSignalData.en.actionMessage = 'Are you over 18 years old?';
            oneSignalData.nl.actionMessage = 'Ben je ouder dan 18 jaar?';
            oneSignalData.fr.actionMessage = 'Avez-vous plus de 18 ans?';
            oneSignalData.es.actionMessage = '¿Tienes más de 18 años?';
            oneSignalData.se.actionMessage = 'Är du över 18 år?';
            oneSignalData.no.actionMessage = 'Er du over 18 år?';
            break;
        case (hostname.indexOf('app.lp1.surveybizz.co') != -1):
            oneSignalData.title = 'Survey';
            oneSignalData.appId = '672b92a6-01fe-4ce9-a88f-b87a608efebe';
            oneSignalData.en.actionMessage = 'Are you over 18 years old?';
            oneSignalData.nl.actionMessage = 'Ben je ouder dan 18 jaar?';
            oneSignalData.fr.actionMessage = 'Avez-vous plus de 18 ans?';
            oneSignalData.es.actionMessage = '¿Tienes más de 18 años?';
            oneSignalData.se.actionMessage = 'Är du över 18 år?';
            oneSignalData.no.actionMessage = 'Er du over 18 år?';
            break;
        case (hostname.indexOf('app.lp2.surveybizz.co') != -1):
            oneSignalData.title = 'Survey';
            oneSignalData.appId = '70abb6da-b79b-43f7-819c-354b94959c97';
            oneSignalData.en.actionMessage = 'Are you over 18 years old?';
            oneSignalData.nl.actionMessage = 'Ben je ouder dan 18 jaar?';
            oneSignalData.fr.actionMessage = 'Avez-vous plus de 18 ans?';
            oneSignalData.es.actionMessage = '¿Tienes más de 18 años?';
            oneSignalData.se.actionMessage = 'Är du över 18 år?';
            oneSignalData.no.actionMessage = 'Er du over 18 år?';
            break;
        case (hostname.indexOf('l01.offerleads.club') != -1):
            oneSignalData.title = 'Survey';
            oneSignalData.appId = '2fb4d8ff-0edc-4d9a-ae29-99ca062ce06b';
            oneSignalData.en.actionMessage = 'Are you over 18 years old?';
            oneSignalData.nl.actionMessage = 'Ben je ouder dan 18 jaar?';
            oneSignalData.fr.actionMessage = 'Avez-vous plus de 18 ans?';
            oneSignalData.es.actionMessage = '¿Tienes más de 18 años?';
            oneSignalData.se.actionMessage = 'Är du över 18 år?';
            oneSignalData.no.actionMessage = 'Er du over 18 år?';
            break;
        case (hostname.indexOf('l02.offerleads.club') != -1):
            oneSignalData.title = 'Survey';
            oneSignalData.appId = 'd7b699a5-27c8-4799-9e5d-070eb98fc61a';
            oneSignalData.en.actionMessage = 'Are you over 18 years old?';
            oneSignalData.nl.actionMessage = 'Ben je ouder dan 18 jaar?';
            oneSignalData.fr.actionMessage = 'Avez-vous plus de 18 ans?';
            oneSignalData.es.actionMessage = '¿Tienes más de 18 años?';
            oneSignalData.se.actionMessage = 'Är du över 18 år?';
            oneSignalData.no.actionMessage = 'Er du over 18 år?';
            break;
        case (hostname.indexOf('app.la.quizfiesta.com') != -1):
            oneSignalData.title = 'Survey';
            oneSignalData.appId = '0a2a65a1-6f06-4084-a841-8477f736ac76';
            oneSignalData.en.actionMessage = 'Are you over 18 years old?';
            oneSignalData.nl.actionMessage = 'Ben je ouder dan 18 jaar?';
            oneSignalData.fr.actionMessage = 'Avez-vous plus de 18 ans?';
            oneSignalData.es.actionMessage = '¿Tienes más de 18 años?';
            oneSignalData.se.actionMessage = 'Är du över 18 år?';
            oneSignalData.no.actionMessage = 'Er du over 18 år?';
            break;
        case (hostname.indexOf('thedailygifts.club') != -1):
            oneSignalData.title = 'DailyGifts';
            oneSignalData.appId = '9d3b915f-27c5-42da-adb9-433e242c8093';
            oneSignalData.en.actionMessage = 'Are you over 18 years old?';
            oneSignalData.nl.actionMessage = 'Ben je ouder dan 18 jaar?';
            oneSignalData.fr.actionMessage = 'Avez-vous plus de 18 ans?';
            oneSignalData.es.actionMessage = '¿Tienes más de 18 años?';
            oneSignalData.se.actionMessage = 'Är du över 18 år?';
            oneSignalData.no.actionMessage = 'Er du over 18 år?';
            break;
        case (hostname.indexOf('app.ln1.surveyaward.co') != -1):
            oneSignalData.title = 'Survey';
            oneSignalData.appId = '47b2d9e5-fdbf-4581-b306-14c338033893';
            oneSignalData.en.actionMessage = 'Are you over 18 years old?';
            oneSignalData.nl.actionMessage = 'Ben je ouder dan 18 jaar?';
            oneSignalData.fr.actionMessage = 'Avez-vous plus de 18 ans?';
            oneSignalData.es.actionMessage = '¿Tienes más de 18 años?';
            oneSignalData.se.actionMessage = 'Är du över 18 år?';
            oneSignalData.no.actionMessage = 'Er du over 18 år?';
            break;
        case (hostname.indexOf('claimthis.club') != -1):
            oneSignalData.title = 'Claimthis';
            oneSignalData.appId = '218489e3-2023-4faa-9939-576026132f9a';
            oneSignalData.en.actionMessage = 'Are you over 18 years old?';
            oneSignalData.nl.actionMessage = 'Ben je ouder dan 18 jaar?';
            oneSignalData.fr.actionMessage = 'Avez-vous plus de 18 ans?';
            oneSignalData.es.actionMessage = '¿Tienes más de 18 años?';
            oneSignalData.se.actionMessage = 'Är du över 18 år?';
            oneSignalData.no.actionMessage = 'Er du over 18 år?';
            oneSignalData.en.welcomeMessage = 'Thanks for confirming';
            break;

        default:
            hostnameFound = false;
            break;
    }

    let language = 'en';

    switch (country) {
        case 'NL':
            language = 'nl';
            break;
        case 'BE':
            language = 'nl';
            break;
        case 'FR':
            language = 'fr';
            break;
        case 'ES':
            language = 'es';
            break;
        case 'NO':
            language = 'no';
            break;
        case 'SE':
            language = 'se';
            break;
        default:
            language = 'en'
    }

    var lead_id = '';
    var aff_tid = '';
    if (typeof(window.qubiq_profile_get) !== 'undefined') {
        var data = window.qubiq_profile_get(['ql_lead_id', 'aff_tid']);
        if (data && data.ql_lead_id) {
            lead_id = data.ql_lead_id;
        }
        if (data && data.aff_tid) {
            aff_tid = data.aff_tid;
        }
    }
    var oneSignalLink = document.createElement('link');
    oneSignalLink.rel = "manifest";
    oneSignalLink.href = "https://static.ln5.quiztionnaire.com/manifest.json";
    var oneSignalSource = document.createElement('script');
    oneSignalSource.src = 'https://cdn.onesignal.com/sdks/OneSignalSDK.js';
    oneSignalSource.async = "";
    var oneSignalScript = document.createElement('script');
    oneSignalScript.text = 'var OneSignal = window.OneSignal || [];\n' +
        '  OneSignal.push(function() {\n' +
        '    OneSignal.sendTags({lead_id: \'' + lead_id + '\',aff_tid: \'' + aff_tid + '\'});\n' +
        '    OneSignal.init({\n' +
        '      appId: "' + oneSignalData.appId + '",\n' +
        '      autoRegister: false,\n' +
        '      promptOptions: {\n' +
        '        actionMessage: "' + oneSignalData[language].actionMessage + '",\n' +
        '        acceptButtonText: "' + oneSignalData[language].yes + '",\n' +
        '        cancelButtonText: "' + oneSignalData[language].no + '"\n' +
        '      },' +
        '      welcomeNotification: {\n' +
        '        title: "' + oneSignalData.title + '",\n' +
        '        message: "' + oneSignalData[language].welcomeMessage + '"\n' +
        '      },\n' +
        '      notifyButton: {\n' +
        '        enable: true,\n' +
        '      },\n' +
        '    });\n' +
        '  OneSignal.showSlidedownPrompt();\n' +
        '  });';

    if (hostnameFound) {
        document.head.appendChild(oneSignalLink);
        document.head.appendChild(oneSignalSource);
        document.head.appendChild(oneSignalScript);
    }

    if (country == "US") {
        // TrustedForm
        var trustedFormScript = document.createElement('script');
        trustedFormScript.text =
            '(function() {\n' +
            '    var field = \'xxTrustedFormCertUrl\';\n' +
            '    var provideReferrer = false;\n' +
            '    var tf = document.createElement(\'script\');\n' +
            '    tf.type = \'text/javascript\'; tf.async = true; \n' +
            '    tf.src = \'http\' + (\'https:\' == document.location.protocol ? \'s\' : \'\') +\n' +
            '    \'://api.trustedform.com/trustedform.js?provide_referrer=\' + escape(provideReferrer) + \'&field=\' + escape(field) + \'&l=\'+new Date().getTime()+Math.random();\n' +
            '    var s = document.getElementsByTagName(\'script\')[0]; s.parentNode.insertBefore(tf, s); }\n' +
            ')();'
        var trustedFormNoScript = document.createElement('noscript');
        var img = document.createElement('img');
        img.src = "http://api.trustedform.com/ns.gif";
        trustedFormNoScript.appendChild(img);

        document.body.appendChild(trustedFormScript);
        document.body.appendChild(trustedFormNoScript);

        var trustedFormTimeout = setTimeout(function() {
            var vl_tf_token = document.querySelector('#xxTrustedFormToken_0');
            var vl_tf_url = document.querySelector('#xxTrustedFormCertUrl_0');
            if (vl_tf_token && vl_tf_url) {
                window.qubiq_profile_add({ vl_tf_token: vl_tf_token.value, vl_tf_url: vl_tf_url.value })
            }
            trustedFormTimeout = null;
        }, 3000);
    }
    var googleAnalyticsCode = '';

    if (hostname.indexOf('surveybizz.co') !== -1) {
        googleAnalyticsCode = 'UA-160601427-1'
    } else if (hostname.indexOf('claimthis.club') !== -1) {
        googleAnalyticsCode = 'UA-160601427-2'
    }

    var googleAnalyticsScript1 = document.createElement('script');
    googleAnalyticsScript1.src = "https://www.googletagmanager.com/gtag/js?id=" + googleAnalyticsCode;
    googleAnalyticsScript1.async = true;
    var googleAnalyticsScript2 = document.createElement('script');

    googleAnalyticsScript2.text =
        '  window.dataLayer = window.dataLayer || [];\n' +
        '  function gtag(){dataLayer.push(arguments);}\n' +
        '  gtag(\'js\', new Date());\n' +
        '\n' +
        '  gtag(\'config\', \'' + googleAnalyticsCode + '\');\n' +
        '(function(i,s,o,g,r,a,m){i[\'GoogleAnalyticsObject\']=r;i[r]=i[r]||function(){\n' +
        '(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\n' +
        'm=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\n' +
        '})(window,document,\'script\',\'https://www.google-analytics.com/analytics.js\',\'ga\');\n' +
        '\n' +
        'ga(\'create\', \'' + googleAnalyticsCode + '\', \'auto\');' +
        'ga(\'send\', \'pageview\');' +
        'ga(\'send\', \'event\', {\n' +
        '                eventCategory: \'Widget\',\n' +
        '                eventAction: \'p_id\',\n' +
        '                eventLabel: \'' + p_id + '\'\n' +
        '            });';

    if (googleAnalyticsCode) {
        document.body.appendChild(googleAnalyticsScript1);
        document.body.appendChild(googleAnalyticsScript2);
    }

    // -------------NOT EDITABLE-------------
    document.removeEventListener('loaded_widget', noConsentNeeded, true);
};
//--0.END DEFAULT - Scripts that trigger without consent





//--1.START CONSENT TRIGGER - (Scripts that trigger on consent)
function appendScripts() {


    if (aff_fbp) {
        if (aff_fbp.indexOf('.') == -1) {
            var facebookPixelScript = document.createElement('script');
            facebookPixelScript.text = '!function (f, b, e, v, n, t, s) {\n' +
                '            if (f.fbq) return;\n' +
                '            n = f.fbq = function () {\n' +
                '              n.callMethod ?\n' +
                '                n.callMethod.apply(n, arguments) : n.queue.push(arguments)\n' +
                '            };\n' +
                '            if (!f._fbq) f._fbq = n;\n' +
                '            n.push = n;\n' +
                '            n.loaded = !0;\n' +
                '            n.version = \'2.0\';\n' +
                '            n.queue = [];\n' +
                '            t = b.createElement(e);\n' +
                '            t.async = !0;\n' +
                '            t.src = v;\n' +
                '            s = b.getElementsByTagName(e)[0];\n' +
                '            s.parentNode.insertBefore(t, s)\n' +
                '          }(window, document, \'script\',\n' +
                '            \'https://connect.facebook.net/en_US/fbevents.js\');\n' +
                '          fbq(\'init\', \'' + aff_fbp + '\');\n' +
                '          fbq(\'track\', \'PageView\');';
            document.body.appendChild(facebookPixelScript);
        }
    } else {

        if (aff_code && aff_code == 'MVP') {
            waitForGlobal("vl_fbpxid", function() {
                try {
                    var facebookPixelScript = document.createElement('script');
                    facebookPixelScript.text =
                        '!function (f, b, e, v, n, t, s) {\n' +
                        '            if (f.fbq) return;\n' +
                        '            n = f.fbq = function () {\n' +
                        '              n.callMethod ?\n' +
                        '                n.callMethod.apply(n, arguments) : n.queue.push(arguments)\n' +
                        '            };\n' +
                        '            if (!f._fbq) f._fbq = n;\n' +
                        '            n.push = n;\n' +
                        '            n.loaded = !0;\n' +
                        '            n.version = \'2.0\';\n' +
                        '            n.queue = [];\n' +
                        '            t = b.createElement(e);\n' +
                        '            t.async = !0;\n' +
                        '            t.src = v;\n' +
                        '            s = b.getElementsByTagName(e)[0];\n' +
                        '            s.parentNode.insertBefore(t, s)\n' +
                        '          }(window, document, \'script\',\n' +
                        '            \'https://connect.facebook.net/en_US/fbevents.js\');\n' +
                        '          fbq(\'init\', \'' + vl_fbpxid + '\');\n' +
                        '          fbq(\'track\', \'PageView\');';
                    document.head.appendChild(facebookPixelScript);
                } catch (e) {
                    console.log('Facebook script addition error', e)
                }
            });
        }









        //PageView Facebook - PAN - PageView by aff_sub4
        if (aff_code && (aff_code == 'PAN' || aff_code == 'CDL' || aff_code == 'MZYX' || aff_code == 'LDR' || aff_code == 'IRS' || aff_code == 'AFM')) {
            if (aff_sub4) {
                var facebookPixelScript = document.createElement('script');
                facebookPixelScript.text = '!function (f, b, e, v, n, t, s) {\n' +
                    '            if (f.fbq) return;\n' +
                    '            n = f.fbq = function () {\n' +
                    '              n.callMethod ?\n' +
                    '                n.callMethod.apply(n, arguments) : n.queue.push(arguments)\n' +
                    '            };\n' +
                    '            if (!f._fbq) f._fbq = n;\n' +
                    '            n.push = n;\n' +
                    '            n.loaded = !0;\n' +
                    '            n.version = \'2.0\';\n' +
                    '            n.queue = [];\n' +
                    '            t = b.createElement(e);\n' +
                    '            t.async = !0;\n' +
                    '            t.src = v;\n' +
                    '            s = b.getElementsByTagName(e)[0];\n' +
                    '            s.parentNode.insertBefore(t, s)\n' +
                    '          }(window, document, \'script\',\n' +
                    '            \'https://connect.facebook.net/en_US/fbevents.js\');\n' +
                    '          fbq(\'init\', \'' + aff_sub4 + '\');\n' +
                    '          fbq(\'track\', \'PageView\');';
                document.body.appendChild(facebookPixelScript);
            }
        }

        //PageView Facebook - WAM - PageView by hardcoded
        if (aff_code && (aff_code == 'WAM' || aff_code == 'TST')) {
            var facebookPixelScript = document.createElement('script');
            facebookPixelScript.text = '!function (f, b, e, v, n, t, s) {\n' +
                '            if (f.fbq) return;\n' +
                '            n = f.fbq = function () {\n' +
                '              n.callMethod ?\n' +
                '                n.callMethod.apply(n, arguments) : n.queue.push(arguments)\n' +
                '            };\n' +
                '            if (!f._fbq) f._fbq = n;\n' +
                '            n.push = n;\n' +
                '            n.loaded = !0;\n' +
                '            n.version = \'2.0\';\n' +
                '            n.queue = [];\n' +
                '            t = b.createElement(e);\n' +
                '            t.async = !0;\n' +
                '            t.src = v;\n' +
                '            s = b.getElementsByTagName(e)[0];\n' +
                '            s.parentNode.insertBefore(t, s)\n' +
                '          }(window, document, \'script\',\n' +
                '            \'https://connect.facebook.net/en_US/fbevents.js\');\n' +
                '          fbq(\'init\', \'1199360690228937\');\n' +
                '          fbq(\'track\', \'Lead\');';
            document.body.appendChild(facebookPixelScript);
        }
    }

    // Inspectlet code
    if (aff_code == 'X' || aff_code == '{X}') { // HERE YOU SET WHAT AFF_CODE YOU WISH TO USE
        //if (aff_source === '1' || aff_source === '2' || !aff_source) { 				                    // HERE YOU SET WHAT AFF_SOURCE YOU WISH TO USE
        try {
            if (country == "GB" || country == 'NO' || country == 'ES' || country == 'SE') { // HERE YOU CAN SET WHAT COUNTRY YOU WISH TO USE
                var inspectlet = document.createElement('script');
                inspectlet.text = '(function() {\n' +
                    '  var insp_ab_loader = false; // set this boolean to false to disable the A/B testing loader\n' +
                    '  window.__insp = window.__insp || [];\n' +
                    '  __insp.push([\'wid\', 801403116]);\n' +
                    '  var ldinsp = function(){\n' +
                    '    if(typeof window.__inspld != "undefined") return; window.__inspld = 1; var insp = document.createElement(\'script\'); insp.type = \'text/javascript\'; insp.async = true; insp.id = "inspsync"; insp.src = (\'https:\' == document.location.protocol ? \'https\' : \'http\') + \'://cdn.inspectlet.com/inspectlet.js?wid=801403116&r=\' + Math.floor(new Date().getTime()/3600000); var x = document.getElementsByTagName(\'script\')[0]; x.parentNode.insertBefore(insp, x);if(typeof insp_ab_loader != "undefined" && insp_ab_loader){ var adlt = function(){ var e = document.getElementById(\'insp_abl\'); if(e){ e.parentNode.removeChild(e); __insp.push([\'ab_timeout\']); }}; var adlc = "body{ visibility: hidden !important; }"; var adln = typeof insp_ab_loader_t != "undefined" ? insp_ab_loader_t : 1200; insp.onerror = adlt; var abti = setTimeout(adlt, adln); window.__insp_abt = abti; var abl = document.createElement(\'style\'); abl.id = "insp_abl"; abl.type = "text/css"; if(abl.styleSheet) abl.styleSheet.cssText = adlc; else abl.appendChild(document.createTextNode(adlc)); document.head.appendChild(abl); } };\n' +
                    '  setTimeout(ldinsp, 0);\n' +
                    '})();'
                inspectlet.setAttribute("id", "inspectletjs");
                document.body.appendChild(inspectlet);
            }
        } catch (e) {
            console.log(e);
        }
    }
    // Default codes
    if (aff_code && (aff_code == 'TEST' || aff_code == '{var7}')) {
        //if (aff_code && (aff_code != 'TEST' && aff_code != '{var7}')) {

        /* appthis I
        var a = document.createElement('iframe');
        a.setAttribute("src", "//appstarlab.com//mnz/v1?placement=06de5e61-041a-11e7-8fb5-0cc47a44dbaa&source={source}&idfa={idfa}&androidid={android_ad_id}");
        a.setAttribute("width", "1");
        a.setAttribute("height", "1");
        a.setAttribute("scrolling", "no");
        a.setAttribute("bordercolor", "#ffffff");
        document.body.appendChild(a);  */

        /* appthis II/
        var b = document.createElement('iframe');
        b.setAttribute("src", "//mobileapp.global/mnz/v1?placement=f78241ed-3859-11e8-8b27-0aa1dc7bdff2&androidid={android_ad_id}&source=" + aff_code + "_" + aff_sub + "&idfa={idfa}");
        b.setAttribute("width", "1");
        b.setAttribute("height", "1");
        b.setAttribute("scrolling", "no");
        b.setAttribute("bordercolor", "#ffffff");
        document.body.appendChild(b);		*/

        /*  icumulus Apple Prizes Sidney
        var d = document.createElement('script');
        d.setAttribute("src", "https://trk.inimbus.com.au/tagmanager/current/?pubid=449&siteid=2");
        d.setAttribute("defer", "true");
        d.setAttribute("async", "true");
        document.body.appendChild(d);
        */
    }
    // NOT EDITABLE-------------
    if (!onPageLoad) {
        document.removeEventListener('loaded_widget', appendScripts, true);
        document.removeEventListener('consent_given', appendScripts, true);
    }
};
//--1.END CONSENT TRIGGER -  (Scripts that trigger on consent)




// START NOT EDITABLE-------------
function checkForConsent(e) {
    var n = e.detail.step;
    e.detail.hasCookieConsent && 1 === n ? (consent_given = !1, document.addEventListener("consent_given", checkIfConsentGiven, !0)) : appendScripts()
}

function checkIfConsentGiven(e) {
    e.detail.consentGiven ? (consent_given = !0, appendScripts()) : consent_given = !1
}
onPageLoad ? appendScripts() : document.addEventListener("loaded_widget", checkForConsent, !0), document.addEventListener("loaded_widget", noConsentNeeded, !0);

// -END NOT EDITABLE-------------





//--2.START STEPCHANGE TRIGGER  - (Scripts that trigger on stepchange)
function triggerOnStepChange(e) {
    var step = e.detail.step;
    // var tag = e.detail.tag;

    if (typeof(ga) === 'function') {
        ga('send', 'event', {
            eventCategory: 'Widget',
            eventAction: 'step_change',
            eventLabel: step
        });
    }
    if (step == 2) {
        //MVP -  eventPixel
        if (aff_code == 'MVP') {
            if (country == "AU") {
                fbq('track', 'CompleteRegistration', {
                    value: 0.45,
                    currency: 'USD',
                });
            }
            if (country == "FR") {
                fbq('track', 'CompleteRegistration', {
                    value: 0.45,
                    currency: 'USD',
                });
            }
            if (country == "GB") {
                fbq('track', 'CompleteRegistration', {
                    value: 0.45,
                    currency: 'USD',
                });
            }
            if (country == "NZ") {
                fbq('track', 'CompleteRegistration', {
                    value: 0.45,
                    currency: 'USD',
                });
            }
        }


        // Pushlink
        if (country == "XX" || country == 'XY') {
            var pushlink = document.createElement('script');
            pushlink.text = '(function(w,d,s,i,n){w[n]=w[n]||{q:[],init:function(o){w[n].initOpts=o;},ready:function(c){w[n].q.push(c);}};\n' +
                'setTimeout(function(j,k){if(!d.getElementById(i)){k=d.getElementsByTagName(s)[0];j=d.createElement(s);j.id=i;\n' +
                'j.src="https://cdn.by.wonderpush.com/sdk/1.1/wonderpush-loader.min.js";k.parentNode.insertBefore(j,k);}},0);\n' +
                '}(window,document,"script","wonderpush-jssdk-loader","WonderPush"));\n' +
                '\n' +
                'WonderPush.init({\n' +
                '    webKey: "dbd7d5fdeb8e608605c2d521de73fef02aa92068151f76b4443fe765faf3f958",\n' +
                '    geolocation: false,\n' +
                '    optInOptions: {\n' +
                '        // You can modify or translate the following:\n' +
                '        externalBoxMessage: "We\'d like to send you notifications",\n' +
                '        externalBoxExampleTitle: "Example notification",\n' +
                '        externalBoxExampleMessage: "This is an example notification",\n' +
                '        externalBoxDisclaimer: "You can always unsubscribe at anytime.",\n' +
                '        externalBoxProcessingMessage: "Subscribing...",\n' +
                '        externalBoxSuccessMessage: "Thanks for subscribing!",\n' +
                '        externalBoxFailureMessage: "Sorry, something went wrong.",\n' +
                '        externalBoxTooLongHint: "Poor connection or private browsing?",\n' +
                '        externalBoxCloseHint: "Close",\n' +
                '        modalBoxMessage: "We will send you personalized notifications.<br/>You can always unsubscribe at any time.",\n' +
                '        modalBoxButton: "Got it!"\n' +
                '    }\n' +
                '});';
            document.body.appendChild(pushlink);
            document.removeEventListener('stepChanged', triggerOnStepChange, false);
        }
    }
    if (step == 3) {

        if (aff_code && aff_code == 'CDLX') {
            if (aff_sub4) {
                fbq('track', 'CompleteRegistration', {
                    value: aff_c,
                    currency: 'USD',
                });
            }
        }

        if (aff_code && (aff_code == 'MZYX' || aff_code == 'WAM')) {
            if (aff_sub3) {
                fbq('track', 'CompleteRegistration', {
                    value: aff_c,
                    currency: 'USD',
                });
            }
        }

        if (aff_code && aff_code == 'WOOX') {
            var a = document.createElement('iframe');
            a.setAttribute("src", "http://www.registration-port.com/" + aff_offer_id + ".html");
            a.setAttribute("width", "1");
            a.setAttribute("height", "1");
            a.setAttribute("scrolling", "no");
            a.setAttribute("bordercolor", "#ffffff");
            document.body.appendChild(a);
        }


        //--2A.START STEPCHANGE TRIGGER + PAID  - (Scripts that trigger on stepchange + paid)
        if (aff_p) {

            //MVW - TrackingPixel
            if (aff_code && aff_code == 'MVWX') {
                var a = document.createElement('iframe');
                a.setAttribute("src", "https://www.mlinktracker.com/frame/e2c4w24464y2v2z294t2/" + aff_sub3);
                a.setAttribute("width", "1");
                a.setAttribute("height", "1");
                a.setAttribute("scrolling", "no");
                a.setAttribute("bordercolor", "#ffffff");
                document.body.appendChild(a);
            }
        }
        //--2A.END STEPCHANGE TRIGGER + PAID  - (Scripts that trigger on stepchange + paid)
    }
    //--2B.START STEPCHANGE TRIGGER + CONSENT  - (Scripts that trigger on stepchange + paid)
    if (consent_given !== false) {
        if (step == 2) {
            if (country == 'GB') {
                //LiveRamp to lead when cookie consent is true AND email MD5 is available
                if (aff_code && (aff_code != 'XXX' || aff_code != 'YYY')) {
                    var a = document.createElement('iframe');
                    var ld_email = window.qubiq_profile_get(['ld_email']).ld_email;
                    var MD5 = function(d) { result = M(V(Y(X(d), 8 * d.length))); return result.toLowerCase() };

                    function M(d) { for (var _, m = "0123456789ABCDEF", f = "", r = 0; r < d.length; r++) _ = d.charCodeAt(r), f += m.charAt(_ >>> 4 & 15) + m.charAt(15 & _); return f }

                    function X(d) { for (var _ = Array(d.length >> 2), m = 0; m < _.length; m++) _[m] = 0; for (m = 0; m < 8 * d.length; m += 8) _[m >> 5] |= (255 & d.charCodeAt(m / 8)) << m % 32; return _ }

                    function V(d) { for (var _ = "", m = 0; m < 32 * d.length; m += 8) _ += String.fromCharCode(d[m >> 5] >>> m % 32 & 255); return _ }

                    function Y(d, _) {
                        d[_ >> 5] |= 128 << _ % 32, d[14 + (_ + 64 >>> 9 << 4)] = _;
                        for (var m = 1732584193, f = -271733879, r = -1732584194, i = 271733878, n = 0; n < d.length; n += 16) {
                            var h = m,
                                t = f,
                                g = r,
                                e = i;
                            f = md5_ii(f = md5_ii(f = md5_ii(f = md5_ii(f = md5_hh(f = md5_hh(f = md5_hh(f = md5_hh(f = md5_gg(f = md5_gg(f = md5_gg(f = md5_gg(f = md5_ff(f = md5_ff(f = md5_ff(f = md5_ff(f, r = md5_ff(r, i = md5_ff(i, m = md5_ff(m, f, r, i, d[n + 0], 7, -680876936), f, r, d[n + 1], 12, -389564586), m, f, d[n + 2], 17, 606105819), i, m, d[n + 3], 22, -1044525330), r = md5_ff(r, i = md5_ff(i, m = md5_ff(m, f, r, i, d[n + 4], 7, -176418897), f, r, d[n + 5], 12, 1200080426), m, f, d[n + 6], 17, -1473231341), i, m, d[n + 7], 22, -45705983), r = md5_ff(r, i = md5_ff(i, m = md5_ff(m, f, r, i, d[n + 8], 7, 1770035416), f, r, d[n + 9], 12, -1958414417), m, f, d[n + 10], 17, -42063), i, m, d[n + 11], 22, -1990404162), r = md5_ff(r, i = md5_ff(i, m = md5_ff(m, f, r, i, d[n + 12], 7, 1804603682), f, r, d[n + 13], 12, -40341101), m, f, d[n + 14], 17, -1502002290), i, m, d[n + 15], 22, 1236535329), r = md5_gg(r, i = md5_gg(i, m = md5_gg(m, f, r, i, d[n + 1], 5, -165796510), f, r, d[n + 6], 9, -1069501632), m, f, d[n + 11], 14, 643717713), i, m, d[n + 0], 20, -373897302), r = md5_gg(r, i = md5_gg(i, m = md5_gg(m, f, r, i, d[n + 5], 5, -701558691), f, r, d[n + 10], 9, 38016083), m, f, d[n + 15], 14, -660478335), i, m, d[n + 4], 20, -405537848), r = md5_gg(r, i = md5_gg(i, m = md5_gg(m, f, r, i, d[n + 9], 5, 568446438), f, r, d[n + 14], 9, -1019803690), m, f, d[n + 3], 14, -187363961), i, m, d[n + 8], 20, 1163531501), r = md5_gg(r, i = md5_gg(i, m = md5_gg(m, f, r, i, d[n + 13], 5, -1444681467), f, r, d[n + 2], 9, -51403784), m, f, d[n + 7], 14, 1735328473), i, m, d[n + 12], 20, -1926607734), r = md5_hh(r, i = md5_hh(i, m = md5_hh(m, f, r, i, d[n + 5], 4, -378558), f, r, d[n + 8], 11, -2022574463), m, f, d[n + 11], 16, 1839030562), i, m, d[n + 14], 23, -35309556), r = md5_hh(r, i = md5_hh(i, m = md5_hh(m, f, r, i, d[n + 1], 4, -1530992060), f, r, d[n + 4], 11, 1272893353), m, f, d[n + 7], 16, -155497632), i, m, d[n + 10], 23, -1094730640), r = md5_hh(r, i = md5_hh(i, m = md5_hh(m, f, r, i, d[n + 13], 4, 681279174), f, r, d[n + 0], 11, -358537222), m, f, d[n + 3], 16, -722521979), i, m, d[n + 6], 23, 76029189), r = md5_hh(r, i = md5_hh(i, m = md5_hh(m, f, r, i, d[n + 9], 4, -640364487), f, r, d[n + 12], 11, -421815835), m, f, d[n + 15], 16, 530742520), i, m, d[n + 2], 23, -995338651), r = md5_ii(r, i = md5_ii(i, m = md5_ii(m, f, r, i, d[n + 0], 6, -198630844), f, r, d[n + 7], 10, 1126891415), m, f, d[n + 14], 15, -1416354905), i, m, d[n + 5], 21, -57434055), r = md5_ii(r, i = md5_ii(i, m = md5_ii(m, f, r, i, d[n + 12], 6, 1700485571), f, r, d[n + 3], 10, -1894986606), m, f, d[n + 10], 15, -1051523), i, m, d[n + 1], 21, -2054922799), r = md5_ii(r, i = md5_ii(i, m = md5_ii(m, f, r, i, d[n + 8], 6, 1873313359), f, r, d[n + 15], 10, -30611744), m, f, d[n + 6], 15, -1560198380), i, m, d[n + 13], 21, 1309151649), r = md5_ii(r, i = md5_ii(i, m = md5_ii(m, f, r, i, d[n + 4], 6, -145523070), f, r, d[n + 11], 10, -1120210379), m, f, d[n + 2], 15, 718787259), i, m, d[n + 9], 21, -343485551), m = safe_add(m, h), f = safe_add(f, t), r = safe_add(r, g), i = safe_add(i, e)
                        }
                        return Array(m, f, r, i)
                    }

                    function md5_cmn(d, _, m, f, r, i) { return safe_add(bit_rol(safe_add(safe_add(_, d), safe_add(f, i)), r), m) }

                    function md5_ff(d, _, m, f, r, i, n) { return md5_cmn(_ & m | ~_ & f, d, _, r, i, n) }

                    function md5_gg(d, _, m, f, r, i, n) { return md5_cmn(_ & f | m & ~f, d, _, r, i, n) }

                    function md5_hh(d, _, m, f, r, i, n) { return md5_cmn(_ ^ m ^ f, d, _, r, i, n) }

                    function md5_ii(d, _, m, f, r, i, n) { return md5_cmn(m ^ (_ | ~f), d, _, r, i, n) }

                    function safe_add(d, _) { var m = (65535 & d) + (65535 & _); return (d >> 16) + (_ >> 16) + (m >> 16) << 16 | 65535 & m }

                    function bit_rol(d, _) { return d << _ | d >>> 32 - _ }
                    var ld_email_md5 = MD5(ld_email);
                    a.setAttribute("src", "https://ejp.rlcdn.com/702979.html?m=" + ld_email_md5);
                    a.setAttribute("width", "1");
                    a.setAttribute("height", "1");
                    a.setAttribute("scrolling", "no");
                    a.setAttribute("bordercolor", "#ffffff");
                    document.body.appendChild(a);
                }
            }
        }


    }
    //--2B.END STEPCHANGE TRIGGER + CONSENT  - (Scripts that trigger on stepchange + paid)

};
//--2.END STEPCHANGE TRIGGER - (Scripts that trigger on stepchange)



//--3.START FULLLEAD TRIGGER - (Scripts that trigger on fullLead)
function triggerOnFullLead(e) {
    fullLead = true;
    //--3A.START FULLLEAD/CONSENT   - Scripts that trigger on fullLead + consent
    if (consent_given !== false) {

        //--3AA.START FULLLEAD/CONSENT/PAID  - Scripts that trigger on fullLead + consent + paid

        waitForGlobal("aff_p", function() {
            if (aff_p) {
                if (aff_fbp) {
                    if (aff_fbp.indexOf('.') !== -1) {
                        var fbp = document.createElement('iframe');
                        fbp.setAttribute("src", "https://" + aff_fbp);
                        fbp.setAttribute("width", "1");
                        fbp.setAttribute("height", "1");
                        fbp.setAttribute("scrolling", "no");
                        fbp.setAttribute("bordercolor", "#ffffff");
                        document.body.appendChild(fbp);
                    } else {
                        if (aff_code && (aff_code == 'LGNX')) {
                            // if (aff_fbpe && aff_fbpe == 'c') {
                            fbq('track', 'CompleteRegistration', {
                                value: aff_c,
                                currency: 'USD',
                            });
                        } else {
                            fbq('track', 'Lead', {
                                value: aff_c,
                                currency: 'USD',
                            });
                        }

                    }
                } else {


                    //MZY/CLG - PageView by iframe
                    if (aff_code && (aff_code == 'MZY')) {
                        if (aff_sub5) {
                            var mzy = document.createElement('iframe');
                            mzy.setAttribute("src", "https://" + aff_sub4 + "?fb_pixel=" + aff_sub5);
                            mzy.setAttribute("width", "1");
                            mzy.setAttribute("height", "1");
                            mzy.setAttribute("scrolling", "no");
                            mzy.setAttribute("bordercolor", "#ffffff");
                            document.body.appendChild(mzy);
                        }
                    }

                    if (aff_code && aff_code == 'ADR') {
                        if (aff_sub4) {
                            var adr = document.createElement('iframe');
                            adr.setAttribute("src", "https://" + aff_sub4 + "/__thankspage?pid=" + aff_sub3 + "&ev=Purchase");
                            adr.setAttribute("width", "1");
                            adr.setAttribute("height", "1");
                            adr.setAttribute("scrolling", "no");
                            adr.setAttribute("bordercolor", "#ffffff");
                            document.body.appendChild(adr);
                        }
                    }


                    if (aff_code && (aff_code == 'CDL' || aff_code == 'PAN' || aff_code == 'MZYX' || aff_code == 'LDR' || aff_code == 'IRS' || aff_code == 'AFM')) {
                        if (aff_sub4) {
                            fbq('track', 'CompleteRegistration', {
                                value: aff_c,
                                currency: 'USD',
                            });
                        }
                    }


                    if (aff_code && (aff_code == 'TST' || aff_code == 'WAM')) {
                        if (aff_sub3) {
                            fbq('track', 'CompleteRegistration', {
                                value: aff_c,
                                currency: 'USD',
                            });
                        }
                    }

                    if (aff_code && aff_code == 'MZXY') {
                        if (aff_sub3) {
                            var a = document.createElement('iframe');
                            a.setAttribute("src", "https://punybit.com/px01.html?fb_pixel=" + aff_sub3);
                            a.setAttribute("width", "1");
                            a.setAttribute("height", "1");
                            a.setAttribute("scrolling", "no");
                            a.setAttribute("bordercolor", "#ffffff");
                            document.body.appendChild(a);
                        }
                    }


                    if (aff_code && aff_code == 'MVW') {
                        var a = document.createElement('iframe');
                        a.setAttribute("src", "https://www.mlinktracker.com/frame/e2c4w24464y2v2z294t2/" + aff_sub3);
                        a.setAttribute("width", "1");
                        a.setAttribute("height", "1");
                        a.setAttribute("scrolling", "no");
                        a.setAttribute("bordercolor", "#ffffff");
                        document.body.appendChild(a);
                    }

                    if (aff_code && aff_code == 'WOO') {
                        var a = document.createElement('iframe');
                        a.setAttribute("src", "https://www.registration-port.com/" + aff_offer_id + ".html");
                        a.setAttribute("width", "1");
                        a.setAttribute("height", "1");
                        a.setAttribute("scrolling", "no");
                        a.setAttribute("bordercolor", "#ffffff");
                        document.body.appendChild(a);
                    }
                }
                //--3AA.END FULLLEAD/CONSENT/PAID  - Scripts that trigger on fullLead + consent + paid

            }
        });

    }
    //--3A.END FULLLEAD/CONSENT   - Scripts that trigger on fullLead + consent


    // DON'T REMOVE
    document.removeEventListener("fullLead", triggerOnFullLead, false);
}
//--3.END FULLLEAD TRIGGER - (Scripts that trigger on fullLead)






// -------------NOT EDITABLE-------------
document.addEventListener("fullLead", triggerOnFullLead, false);
document.addEventListener("stepChanged", triggerOnStepChange, false);

function triggerOnAffP(e) {
    aff_p = e.detail.aff_p;
    aff_c = e.detail.aff_c;
    document.removeEventListener("aff_p", triggerOnAffP, false);
    // if (typeof ga === 'function') {
    //     try {
    //         ga('send', 'event', {
    //             eventCategory: 'Widget',
    //             eventAction: 'aff_p',
    //             eventLabel: e.detail.aff_p
    //         });
    //     } catch (e) {
    //         console.log("Error sending analytics event", e);
    //     }
    //
    // }
}
document.addEventListener("aff_p", triggerOnAffP, false);

function triggerOnVlFb(e) {
    vl_fbpxid = e.detail.vl_fbpxid;
    document.removeEventListener("vl_fbpxid", triggerOnVlFb, false);
}
document.addEventListener("vl_fbpxid", triggerOnVlFb, false);


// EXIT BACK code
(function exitBack() {
    if (aff_code && aff_code != 'IMP') {
        try {
            var t = decodeURIComponent(location.search);
            history.replaceState(null, document.title, location.pathname + "#/!"), history.pushState(null, document.title, location.pathname + "" + t)
        } catch (e) {}
        window.addEventListener("popstate", function() {
            "#/!" === location.hash && (history.replaceState(null, document.title, location.pathname + "" + t), setTimeout(function() {
                var cid = '';

                if (typeof(window.qubiq_profile_get) !== 'undefined') {
                    var data = window.qubiq_profile_get([
                        'ld_first_name',
                        'ld_last_name',
                        'ld_zip_code',
                        'ld_email',
                        'ld_gender',
                        'ld_address_line1',
                        'ld_phone_cell',
                        'ld_dob',
                        'qb_lead_id',
                        'ql_vendor_id',
                        'cl_device',
                        'qb_content_id',
                        'aff_adv_id',
                        'qb_flow_id',
                        'qb_lead_uts',
                        'ql_session_id',
                        'qb_vendor_id'
                    ]);
                    ld_first_name = data && data.ld_first_name && !ld_first_name ? data.ld_first_name : ld_first_name;
                    ld_last_name = data && data.ld_last_name && !ld_last_name ? data.ld_last_name : ld_last_name;
                    ld_zip_code = data && data.ld_zip_code && !ld_zip_code ? data.ld_zip_code : ld_zip_code;
                    ld_email = data && data.ld_email && !ld_email ? data.ld_email : ld_email;
                    ld_gender = data && data.ld_gender && !ld_gender ? data.ld_gender : ld_gender;
                    ld_address_line1 = data && data.ld_address_line1 && !ld_address_line1 ? data.ld_address_line1 : ld_address_line1;
                    ld_phone_cell = data && data.ld_phone_cell && !ld_phone_cell ? data.ld_phone_cell : ld_phone_cell;
                    ld_dob = data && data.ld_dob && !ld_dob ? data.ld_dob : ld_dob;
                    qb_lead_id = data && data.qb_lead_id && !qb_lead_id ? data.qb_lead_id : qb_lead_id;
                    ql_vendor_id = data && data.ql_vendor_id && !ql_vendor_id ? data.ql_vendor_id : ql_vendor_id;
                    cl_device = data && data.cl_device && !cl_device ? data.cl_device : cl_device;
                    qb_content_id = data && data.qb_content_id && !qb_content_id ? data.qb_content_id : qb_content_id;
                    aff_adv_id = data && data.aff_adv_id && !aff_adv_id ? data.aff_adv_id : aff_adv_id;
                    qb_flow_id = data && data.qb_flow_id && !qb_flow_id ? data.qb_flow_id : qb_flow_id;
                    qb_lead_uts = data && data.qb_lead_uts && !qb_lead_uts ? data.qb_lead_uts : qb_lead_uts;
                    ql_session_id = data && data.ql_session_id && !ql_session_id ? data.ql_session_id : ql_session_id;
                    qb_vendor_id = data && data.qb_vendor_id && !qb_vendor_id ? data.qb_vendor_id : qb_vendor_id;

                }
                // EDITABLE
                switch (country) {
                    case 'AU':
                        cid = '9b41e43e-a82b-4741-9da1-58dbf44d6d3c';
                        break;
                    case 'GB':
                        cid = '0c0ec469-259a-476f-a443-afecb9e77fb1';
                        break;
                    case 'FR':
                        cid = '61bc6d46-44b7-40d8-9290-9e394d2e63a7';
                        break;
                    case 'NL':
                        cid = 'e43ad772-c9d3-4d3e-8642-3dd4da3ecdec';
                        break;
                    case 'NO':
                        cid = 'a320ed1a-5683-4d52-8a06-7fd4e1cdb374';
                        break;
                    case 'ES':
                        cid = 'd08d2775-877c-481d-a7b5-0d3350b1eb36';
                        break;
                    case 'NZ':
                        cid = '4ec08366-4c41-47ee-85bf-2ebdce0b42a1';
                        break;

                    default:
                        cid = '0e32020c-1a52-4cab-8fb6-cfc465171a97';
                }

                var newLocation = "https://pridecor-pamins.com/" + cid +
                    "?ld_first_name=" + ld_first_name +
                    "&ld_last_name=" + ld_last_name +
                    "&ld_zip_code=" + ld_zip_code +
                    "&ld_email=" + ld_email +
                    "&ld_gender=" + ld_gender +
                    "&ld_address=" + ld_address_line1 +
                    "&ld_phone_cell=" + ld_phone_cell +
                    "&aff_source=" + aff_source +
                    "&ld_dob=" + ld_dob +
                    "&aff_inc=" + aff_inc +
                    "&externalid=" +
                    "aa:" + aff_adv_id +
                    ";ac:" + aff_code +
                    ";ai:" + aff_id +
                    ";ax:" + aff_inc +
                    ";ao:" + aff_offer_id +
                    ";a1:" + aff_sub +
                    ";a2:" + aff_sub2 +
                    ";a3:" + aff_sub3 +
                    ";a4:" + aff_sub4 +
                    ";a5:" + aff_sub5 +
                    ";ti:" + aff_tid +
                    ";ci:" + 'backbutton' +
                    ";fi:" + qb_flow_id +
                    ";li:" + qb_lead_id +
                    ";gi:" + aff_goal_id2 +
                    ";ts:" + qb_lead_uts +
                    ";oi:" + sc_oid +
                    ";sc:" + sc_tid +
                    ";si:" + ql_session_id +
                    ";vi:" + qb_vendor_id;
                window.location.assign(newLocation);
                // window.location = "https://pridecor-pamins.com/" + cid + "?aff_source=bb_0&ld_first_name=" + newgetURLParameter("ld_first_name") + "&ld_last_name=" + newgetURLParameter("ld_last_name") + "&ld_zip_code=" + newgetURLParameter("ld_zip_code") + "&ld_email=" + newgetURLParameter("ld_email") + "&ld_gender=" + newgetURLParameter("ld_gender") + "&ld_address=" + newgetURLParameter("ld_address_line1") + "&ld_phone_cell=" + newgetURLParameter("ld_phone_cell") + "&ld_age=" + newgetURLParameter("ld_age") + "&ld_dob=" + newgetURLParameter("ld_dob") + "&aff_inc=" + newgetURLParameter("aff_inc") + "&externalid=" + newgetURLParameter("aff_tid") + ";" + aff_offer_id + ";" + newgetURLParameter("aff_goal_id2") + ";" + newgetURLParameter("aff_id") + ";" + newgetURLParameter("ql_vendor_id") + ";" + newgetURLParameter("qb_lead_id") + ";" + newgetURLParameter("sc_oid") + "|" + newgetURLParameter("cl_device") + ";" + newgetURLParameter("aff_code") + ";" + aff_sub + ";" + aff_sub2 + ";" + aff_sub3 + ";" + aff_sub4 + ";" + aff_sub5 + ";" + newgetURLParameter("sc_tid")
            }, 0))
        }, !1)
    }
})();